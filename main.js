!function(){"use strict";function e(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var t=class{constructor(e,t){var s,n,r;s=this,r=()=>this._inputList.some((e=>!e.validity.valid)),(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="_hasInvalidInput"))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,this._inputSelector=e.inputSelector,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._form=t,this._inputList=[...this._form.querySelectorAll(this._inputSelector)],this._buttonElement=this._form.querySelector(this._submitButtonSelector)}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e)}))}_showInputError(e){const t=this._form.querySelector(`.${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`.${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this.toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._setEventListeners()}},s=class{constructor(e){this._popupElement=document.querySelector(`.${e}`),this._handleEscClose=this._handleEscClose.bind(this)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup")||e.target.classList.contains("popup__close"))&&this.close()}))}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose)}},n=class extends s{constructor(e,t){super(e),this._handleFormSubmit=t,this._popupForm=this._popupElement.querySelector(".form"),this._popupInputs=this._popupForm.querySelectorAll(".form__input")}_getInputValues(){const e={};return this._popupInputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}close(){this._popupForm.reset(),super.close()}};const r={inputSelector:".form__input",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled"},i=document.querySelector(".popup_type_edit-profile").querySelector(".form"),o=document.querySelector(".popup_type_add-card").querySelector(".form"),a=(document.querySelector(".gallery"),document.querySelector(".profile__button-edit")),l=document.querySelector(".profile__button-add"),u=document.querySelector(".form__input_content_name"),c=document.querySelector(".form__input_content_job"),p=document.querySelector("#card").content,_=t=>new class{constructor(t,s,n,r){e(this,"_handleDelete",(()=>{this._element.remove(),this._element=null})),e(this,"_handleLike",(()=>{this._likeButton.classList.toggle("card__button-like_liked")})),e(this,"_setEventListeners",(()=>{this._imageElement.addEventListener("click",(()=>this._handleImageClick(this._element))),this._likeButton.addEventListener("click",this._handleLike),this._trashButton.addEventListener("click",this._handleDelete)})),e(this,"generateCard",(()=>(this._element=this._cardSelector.querySelector(".card").cloneNode(!0),this._likeButton=this._element.querySelector(".card__button-like"),this._imageElement=this._element.querySelector(".card__image"),this._trashButton=this._element.querySelector(".card__button-trash"),this._imageElement.src=this._link,this._imageElement.alt=this._title,this._element.querySelector(".card__title").textContent=this._title,this._setEventListeners(),this._element))),this._title=t,this._link=s,this._cardSelector=n,this._handleImageClick=r}}(t.name,t.link,p,(()=>{h.open(t.name,t.link)})).generateCard(),d=new class{constructor(e,t){let{items:s,renderer:n}=e;this._renderedItems=s,this._renderer=n,this._container=document.querySelector(t)}addItem(e){const t=this._renderer(e);this._container.append(t)}prepenedItem(e){this._container.prepend(e)}renderItems(){this._renderedItems.forEach((e=>{this.addItem(e)}))}}({items:[{name:"Cousteauâ€™s underwater classroom: Imparting lessons from under the sea.",link:"https://ogden_images.s3.amazonaws.com/www.mauinews.com/images/2020/02/12060413/CEV3927-1-cousteau.jpg"},{name:"Jacques Cousteau Wearing Diving Gear by Bettmann",link:"https://images.fineartamerica.com/images/artworkimages/mediumlarge/2/jacques-cousteau-wearing-diving-gear-bettmann.jpg"},{name:"Watercraft of Explorer, Invented by Jacques Cousteau",link:"http://35410006.weebly.com/uploads/7/1/8/3/71834201/5553598_orig.jpg"},{name:"Jacques Cousteau, Calypso boat and the Watercrafts, Diving around the World",link:"https://i.pinimg.com/originals/7d/b4/de/7db4de0c201fc36c8da989de15717bd5.jpg"},{name:"Jacques Cousteau, underwater man",link:"https://plus.unsplash.com/premium_photo-1661265851801-e523847e3932?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1374&q=80"},{name:"Calypso Vessel - in Montreal - Canada. Jacques Cousteau around the world",link:"https://upload.wikimedia.org/wikipedia/commons/6/6a/%22Calypso%22_-_Montreal%2C_1980.jpg"}],renderer:_},".gallery");d.renderItems();const m=new n("popup_type_add-card",(e=>{const t=_(e);d.prepenedItem(t),y.toggleButtonState()})),h=new class extends s{constructor(e){super(e),this.popUpDescription=this._popupElement.querySelector(".popup__description")}open(e,t){this.popUpDescription.textContent=e;const s=this._popupElement.querySelector(".popup__image");s.src=t,s.alt=e,super.open()}}("popup_type_card");h.setEventListeners();const v=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._name=document.querySelector(t),this._job=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent,job:this._job.textContent}}setUserInfo(e){let{name:t,job:s}=e;this._name.textContent=t,this._job.textContent=s}}({nameSelector:".profile__title",jobSelector:".profile__subtitle"}),f=new n("popup_type_edit-profile",(e=>{v.setUserInfo(e)}));f.setEventListeners(),a.addEventListener("click",(()=>{const e=v.getUserInfo();var t,s;t=e.name,s=e.job,u.value=t,c.value=s,f.open(),b.resetValidation()})),m.setEventListeners(),l.addEventListener("click",(()=>{m.open(),y.resetValidation(),y.toggleButtonState()}));const b=new t(r,i);b.enableValidation();const y=new t(r,o);y.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiK2JBZ0dBLE1BaEdBLE1BQ0VBLFlBQVlDLEVBQVVDLEcsWUFBYSxLLEVBd0RoQixJQUNWQyxLQUFLQyxXQUFXQyxNQUFNQyxJQUFXQSxFQUFNQyxTQUFTQyxTLCtTQXpEdEIsdUIsd0ZBQ2pDTCxLQUFLTSxlQUFpQlIsRUFBU1MsY0FDL0JQLEtBQUtRLGlCQUFtQlYsRUFBU1csZ0JBQ2pDVCxLQUFLVSxZQUFjWixFQUFTYSxXQUM1QlgsS0FBS1ksc0JBQXdCZCxFQUFTZSxxQkFDdENiLEtBQUtjLHFCQUF1QmhCLEVBQVNpQixvQkFFckNmLEtBQUtnQixNQUFRakIsRUFDYkMsS0FBS0MsV0FBYSxJQUFJRCxLQUFLZ0IsTUFBTUMsaUJBQWlCakIsS0FBS00saUJBQ3ZETixLQUFLa0IsZUFBaUJsQixLQUFLZ0IsTUFBTUcsY0FBY25CLEtBQUtZLHNCQUN0RCxDQUVBUSxrQkFDRXBCLEtBQUtDLFdBQVdvQixTQUFTbEIsSUFDdkJILEtBQUtzQixnQkFBZ0JuQixFQUFNLEdBRS9CLENBTUFvQixnQkFBZ0JDLEdBQ2QsTUFBTUMsRUFBZXpCLEtBQUtnQixNQUFNRyxjQUFlLElBQUdLLEVBQWFFLFlBQy9ERixFQUFhRyxVQUFVQyxJQUFJNUIsS0FBS1Esa0JBQ2hDaUIsRUFBYUksWUFBY0wsRUFBYU0sa0JBQ3hDTCxFQUFhRSxVQUFVQyxJQUFJNUIsS0FBS1UsWUFDbEMsQ0FNQVksZ0JBQWdCRSxHQUNkLE1BQU1DLEVBQWV6QixLQUFLZ0IsTUFBTUcsY0FBZSxJQUFHSyxFQUFhRSxZQUMvREYsRUFBYUcsVUFBVUksT0FBTy9CLEtBQUtRLGtCQUNuQ2lCLEVBQWFFLFVBQVVJLE9BQU8vQixLQUFLVSxhQUNuQ2UsRUFBYUksWUFBYyxFQUM3QixDQU1BRyxvQkFBb0JSLEdBQ2JBLEVBQWFwQixTQUFTQyxNQUd6QkwsS0FBS3NCLGdCQUFnQkUsR0FGckJ4QixLQUFLdUIsZ0JBQWdCQyxFQUl6QixDQWFBUyxvQkFDTWpDLEtBQUtrQyxvQkFDUGxDLEtBQUtrQixlQUFlUyxVQUFVQyxJQUFJNUIsS0FBS2Msc0JBQ3ZDZCxLQUFLa0IsZUFBZWlCLFVBQVcsSUFFL0JuQyxLQUFLa0IsZUFBZVMsVUFBVUksT0FBTy9CLEtBQUtjLHNCQUMxQ2QsS0FBS2tCLGVBQWVpQixVQUFXLEVBRW5DLENBS0FDLHFCQUNFcEMsS0FBS2lDLG9CQUVMakMsS0FBS0MsV0FBV29CLFNBQVNHLElBQ3ZCQSxFQUFhYSxpQkFBaUIsU0FBUyxLQUNyQ3JDLEtBQUtnQyxvQkFBb0JSLEdBQ3pCeEIsS0FBS2lDLG1CQUFtQixHQUN4QixHQUVOLENBS0FLLG1CQUNFdEMsS0FBS29DLG9CQUNQLEdDM0RGLEVBbENBLE1BQ0V2QyxZQUFZMEMsR0FDVnZDLEtBQUt3QyxjQUFnQkMsU0FBU3RCLGNBQWUsSUFBR29CLEtBQ2hEdkMsS0FBSzBDLGdCQUFrQjFDLEtBQUswQyxnQkFBZ0JDLEtBQUszQyxLQUNuRCxDQUVBMEMsZ0JBQWdCRSxHQUNFLFdBQVpBLEVBQUlDLEtBQ043QyxLQUFLOEMsT0FFVCxDQUVBQyxvQkFDRS9DLEtBQUt3QyxjQUFjSCxpQkFBaUIsYUFBY08sS0FFOUNBLEVBQUlJLE9BQU9yQixVQUFVc0IsU0FBUyxVQUM5QkwsRUFBSUksT0FBT3JCLFVBQVVzQixTQUFTLGtCQUU5QmpELEtBQUs4QyxPQUNQLEdBRUosQ0FFQUksT0FDRWxELEtBQUt3QyxjQUFjYixVQUFVQyxJQUFJLGdCQUNqQ2EsU0FBU0osaUJBQWlCLFFBQVNyQyxLQUFLMEMsZ0JBQzFDLENBRUFJLFFBQ0U5QyxLQUFLd0MsY0FBY2IsVUFBVUksT0FBTyxnQkFDcENVLFNBQVNVLG9CQUFvQixRQUFTbkQsS0FBSzBDLGdCQUM3QyxHQ0tGLEVBbENBLGNBQTRCVSxFQUMxQnZELFlBQVkwQyxFQUFlYyxHQUN6QkMsTUFBTWYsR0FFTnZDLEtBQUt1RCxrQkFBb0JGLEVBQ3pCckQsS0FBS3dELFdBQWF4RCxLQUFLd0MsY0FBY3JCLGNBQWMsU0FDbkRuQixLQUFLeUQsYUFBZXpELEtBQUt3RCxXQUFXdkMsaUJBQWlCLGVBQ3ZELENBRUF5QyxrQkFDRSxNQUFNQyxFQUFjLENBQUMsRUFNckIsT0FKQTNELEtBQUt5RCxhQUFhcEMsU0FBU2xCLElBQ3pCd0QsRUFBWXhELEVBQU15RCxNQUFRekQsRUFBTTBELEtBQUssSUFHaENGLENBQ1QsQ0FFQVosb0JBQ0VPLE1BQU1QLG9CQUNOL0MsS0FBS3dELFdBQVduQixpQkFBaUIsVUFBV3lCLElBQzFDQSxFQUFFQyxpQkFDRi9ELEtBQUt1RCxrQkFBa0J2RCxLQUFLMEQsbUJBQzVCMUQsS0FBSzhDLE9BQU8sR0FFaEIsQ0FFQUEsUUFDRTlDLEtBQUt3RCxXQUFXUSxRQUNoQlYsTUFBTVIsT0FDUixHQ2pDRixNQUFNbUIsRUFBZ0IsQ0FDcEIxRCxjQUFlLGVBQ2ZFLGdCQUFpQix5QkFDakJFLFdBQVksMkJBQ1pFLHFCQUFzQixnQkFDdEJFLG9CQUFxQix5QkNPakJtRCxFQURtQnpCLFNBQVN0QixjQUFjLDRCQUNQQSxjQUFjLFNBR2pEZ0QsRUFEZTFCLFNBQVN0QixjQUFjLHdCQUNKQSxjQUFjLFNBS2hEaUQsR0FIVTNCLFNBQVN0QixjQUFjLFlBR1JzQixTQUFTdEIsY0FBYywwQkFDaERrRCxFQUFxQjVCLFNBQVN0QixjQUFjLHdCQUc1Q21ELEVBQXVCN0IsU0FBU3RCLGNBQ3BDLDZCQUdJb0QsRUFBc0I5QixTQUFTdEIsY0FBYyw0QkFFN0NxRCxFQUFlL0IsU0FBU3RCLGNBQWMsU0FBU3NELFFBTy9DQyxFQUFjQyxHQUNMLElDdENmLE1BQ0U5RSxZQUFZK0UsRUFBT0MsRUFBTUMsRUFBY0MsR0FBa0Isd0JBVXpDLEtBQ2QvRSxLQUFLZ0YsU0FBU2pELFNBQ2QvQixLQUFLZ0YsU0FBVyxJQUFJLElBQ3JCLHNCQUthLEtBQ1poRixLQUFLaUYsWUFBWXRELFVBQVV1RCxPQUFPLDBCQUEwQixJQUM3RCw2QkFLb0IsS0FDbkJsRixLQUFLbUYsY0FBYzlDLGlCQUFpQixTQUFTLElBQzNDckMsS0FBS29GLGtCQUFrQnBGLEtBQUtnRixZQUU5QmhGLEtBQUtpRixZQUFZNUMsaUJBQWlCLFFBQVNyQyxLQUFLcUYsYUFDaERyRixLQUFLc0YsYUFBYWpELGlCQUFpQixRQUFTckMsS0FBS3VGLGNBQWMsSUFDaEUsdUJBTWMsS0FDYnZGLEtBQUtnRixTQUFXaEYsS0FBS3dGLGNBQWNyRSxjQUFjLFNBQVNzRSxXQUFVLEdBQ3BFekYsS0FBS2lGLFlBQWNqRixLQUFLZ0YsU0FBUzdELGNBQWMsc0JBQy9DbkIsS0FBS21GLGNBQWdCbkYsS0FBS2dGLFNBQVM3RCxjQUFjLGdCQUNqRG5CLEtBQUtzRixhQUFldEYsS0FBS2dGLFNBQVM3RCxjQUFjLHVCQUNoRG5CLEtBQUttRixjQUFjTyxJQUFNMUYsS0FBSzJGLE1BQzlCM0YsS0FBS21GLGNBQWNTLElBQU01RixLQUFLNkYsT0FDOUI3RixLQUFLZ0YsU0FBUzdELGNBQWMsZ0JBQWdCVSxZQUFjN0IsS0FBSzZGLE9BRS9EN0YsS0FBS29DLHFCQUVFcEMsS0FBS2dGLFlBL0NaaEYsS0FBSzZGLE9BQVNqQixFQUNkNUUsS0FBSzJGLE1BQVFkLEVBQ2I3RSxLQUFLd0YsY0FBZ0JWLEVBQ3JCOUUsS0FBS29GLGtCQUFvQkwsQ0FDM0IsR0RnQ3NCSixFQUFXZixLQUFNZSxFQUFXRSxLQUFNTCxHQUFjLEtBQ3BFc0IsRUFBVzVDLEtBQUt5QixFQUFXZixLQUFNZSxFQUFXRSxLQUFLLElBRXZDa0IsZUFHUkMsRUFBUSxJRTVDQyxNQUNibkcsWUFBWSxFQUFxQm9HLEdBQW1CLElBQXhDLE1BQUVDLEVBQUssU0FBRUMsR0FBVSxFQUM3Qm5HLEtBQUtvRyxlQUFpQkYsRUFDdEJsRyxLQUFLcUcsVUFBWUYsRUFFakJuRyxLQUFLc0csV0FBYTdELFNBQVN0QixjQUFjOEUsRUFDM0MsQ0FFQU0sUUFBUUMsR0FDTixNQUFNQyxFQUFPekcsS0FBS3FHLFVBQVVHLEdBQzVCeEcsS0FBS3NHLFdBQVdJLE9BQU9ELEVBQ3pCLENBQ0FFLGFBQWFILEdBQ1h4RyxLQUFLc0csV0FBV00sUUFBUUosRUFDMUIsQ0FFQUssY0FDRTdHLEtBQUtvRyxlQUFlL0UsU0FBU21GLElBQzNCeEcsS0FBS3VHLFFBQVFDLEVBQUssR0FFdEIsR0Z5QkEsQ0FDRU4sTUR0Q2lCLENBQ25CLENBQ0V0QyxLQUFNLHlFQUNOaUIsS0FBTSx5R0FFUixDQUNFakIsS0FBTSxtREFDTmlCLEtBQU0sMEhBRVIsQ0FDRWpCLEtBQU0sdURBQ05pQixLQUFNLHdFQUVSLENBQ0VqQixLQUFNLDhFQUNOaUIsS0FBTSxnRkFFUixDQUNFakIsS0FBTSxtQ0FDTmlCLEtBQU0sd0tBRVIsQ0FDRWpCLEtBQU0sMkVBQ05pQixLQUFNLDZGQ2dCTnNCLFNBQVV6QixHQUVaLFlBRUZzQixFQUFNYSxjQUVOLE1BQU1DLEVBQWtCLElBQUlDLEVBQWMsdUJBQXdCQyxJQUNoRSxNQUFNQyxFQUFjdkMsRUFBV3NDLEdBQy9CaEIsRUFBTVcsYUFBYU0sR0FDbkJDLEVBQXNCakYsbUJBQW1CLElBR3JDNkQsRUFBYSxJR3pEbkIsY0FBNkIxQyxFQUMzQnZELFlBQVkwQyxHQUNWZSxNQUFNZixHQUNOdkMsS0FBS21ILGlCQUFtQm5ILEtBQUt3QyxjQUFjckIsY0FDekMsc0JBRUosQ0FDQStCLEtBQUtVLEVBQU1pQixHQUNUN0UsS0FBS21ILGlCQUFpQnRGLFlBQWMrQixFQUNwQyxNQUFNd0QsRUFBUXBILEtBQUt3QyxjQUFjckIsY0FBYyxpQkFDL0NpRyxFQUFNMUIsSUFBTWIsRUFDWnVDLEVBQU14QixJQUFNaEMsRUFDWk4sTUFBTUosTUFDUixHSDRDb0MsbUJBQ3RDNEMsRUFBVy9DLG9CQU9YLE1BS01zRSxFQUFXLElJeEVqQixNQUNFeEgsWUFBWSxHQUErQixJQUEvQixhQUFFeUgsRUFBWSxZQUFFQyxHQUFhLEVBQ3ZDdkgsS0FBS3dILE1BQVEvRSxTQUFTdEIsY0FBY21HLEdBQ3BDdEgsS0FBS3lILEtBQU9oRixTQUFTdEIsY0FBY29HLEVBQ3JDLENBRUFHLGNBQ0UsTUFBTyxDQUNMOUQsS0FBTTVELEtBQUt3SCxNQUFNM0YsWUFDakI4RixJQUFLM0gsS0FBS3lILEtBQUs1RixZQUVuQixDQUVBK0YsWUFBWSxHQUFlLElBQWYsS0FBRWhFLEVBQUksSUFBRStELEdBQUssRUFDdkIzSCxLQUFLd0gsTUFBTTNGLFlBQWMrQixFQUN6QjVELEtBQUt5SCxLQUFLNUYsWUFBYzhGLENBQzFCLEdKd0Q0QixDQUM1QkwsYUFBYyxrQkFDZEMsWUFBYSx1QkFHVE0sRUFBWSxJQUFJZCxFQUFjLDJCQUE0QkMsSUFDOURLLEVBQVNPLFlBQVlaLEVBQUssSUFFNUJhLEVBQVU5RSxvQkFFVnFCLEVBQXVCL0IsaUJBQWlCLFNBQVMsS0FDL0MsTUFBTTJFLEVBQU9LLEVBQVNLLGNBaEJJLElBQUM5RCxFQUFNK0QsRUFBTi9ELEVBaUJQb0QsRUFBS3BELEtBakJRK0QsRUFpQkZYLEVBQUtXLElBaEJwQ3JELEVBQXFCVCxNQUFRRCxFQUM3QlcsRUFBb0JWLE1BQVE4RCxFQWdCNUJFLEVBQVUzRSxPQUNWNEUsRUFBeUIxRyxpQkFBaUIsSUFHNUMwRixFQUFnQi9ELG9CQUVoQnNCLEVBQW1CaEMsaUJBQWlCLFNBQVMsS0FDM0N5RSxFQUFnQjVELE9BQ2hCZ0UsRUFBc0I5RixrQkFDdEI4RixFQUFzQmpGLG1CQUFtQixJQUkzQyxNQUFNNkYsRUFBMkIsSUFBSUMsRUFDbkM5RCxFQUNBQyxHQUVGNEQsRUFBeUJ4RixtQkFDekIsTUFBTTRFLEVBQXdCLElBQUlhLEVBQ2hDOUQsRUFDQUUsR0FFRitDLEVBQXNCNUUsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1zLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZS9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuXHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2hvdyBlcnJvclxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBpbnB1dEVsZW1lbnRcclxuICAgKi9cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGhpZGUgZXJyb3JcclxuICAgKiBAcGFyYW0ge29iamVjdH0gaW5wdXRFbGVtZW50XHJcbiAgICovXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogc2hvdyBvciBoaWRlIGVycm9yXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IGlucHV0RWxlbWVudFxyXG4gICAqL1xyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGNoZWNraW5nIGFsbCBmaWVsZHMgZm9yIHZhbGlkaXR5XHJcbiAgICogQHJldHVybnMgYm9vbGVhblxyXG4gICAqL1xyXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiAhaW5wdXQudmFsaWRpdHkudmFsaWQpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIHRvb2dsZSBidXR0b24gc3RhdGVcclxuICAgKi9cclxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBzZXQgYWxsIGxpc3RlbmVycyBvbiB0aGUgY2FyZFxyXG4gICAqL1xyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHN0YXJ0IHZhbGlkYXRpb25cclxuICAgKi9cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsImNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtwb3B1cFNlbGVjdG9yfWApO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpIHx8XHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9fY2xvc2VcIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcblxyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG4gICAgdGhpcy5fcG9wdXBJbnB1dHMgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XHJcblxyXG4gICAgdGhpcy5fcG9wdXBJbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07XHJcbiIsImNvbnN0IGNvbmZpZ0NsYXNzZXMgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbn07XHJcblxyXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJDb3VzdGVhdeKAmXMgdW5kZXJ3YXRlciBjbGFzc3Jvb206IEltcGFydGluZyBsZXNzb25zIGZyb20gdW5kZXIgdGhlIHNlYS5cIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9vZ2Rlbl9pbWFnZXMuczMuYW1hem9uYXdzLmNvbS93d3cubWF1aW5ld3MuY29tL2ltYWdlcy8yMDIwLzAyLzEyMDYwNDEzL0NFVjM5MjctMS1jb3VzdGVhdS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiSmFjcXVlcyBDb3VzdGVhdSBXZWFyaW5nIERpdmluZyBHZWFyIGJ5IEJldHRtYW5uXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLmZpbmVhcnRhbWVyaWNhLmNvbS9pbWFnZXMvYXJ0d29ya2ltYWdlcy9tZWRpdW1sYXJnZS8yL2phY3F1ZXMtY291c3RlYXUtd2VhcmluZy1kaXZpbmctZ2Vhci1iZXR0bWFubi5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiV2F0ZXJjcmFmdCBvZiBFeHBsb3JlciwgSW52ZW50ZWQgYnkgSmFjcXVlcyBDb3VzdGVhdVwiLFxyXG4gICAgbGluazogXCJodHRwOi8vMzU0MTAwMDYud2VlYmx5LmNvbS91cGxvYWRzLzcvMS84LzMvNzE4MzQyMDEvNTU1MzU5OF9vcmlnLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJKYWNxdWVzIENvdXN0ZWF1LCBDYWx5cHNvIGJvYXQgYW5kIHRoZSBXYXRlcmNyYWZ0cywgRGl2aW5nIGFyb3VuZCB0aGUgV29ybGRcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pLnBpbmltZy5jb20vb3JpZ2luYWxzLzdkL2I0L2RlLzdkYjRkZTBjMjAxZmMzNmM4ZGE5ODlkZTE1NzE3YmQ1LmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJKYWNxdWVzIENvdXN0ZWF1LCB1bmRlcndhdGVyIG1hblwiLFxyXG4gICAgbGluazogXCJodHRwczovL3BsdXMudW5zcGxhc2guY29tL3ByZW1pdW1fcGhvdG8tMTY2MTI2NTg1MTgwMS1lNTIzODQ3ZTM5MzI/aXhsaWI9cmItMS4yLjEmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTEzNzQmcT04MFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJDYWx5cHNvIFZlc3NlbCAtIGluIE1vbnRyZWFsIC0gQ2FuYWRhLiBKYWNxdWVzIENvdXN0ZWF1IGFyb3VuZCB0aGUgd29ybGRcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly91cGxvYWQud2lraW1lZGlhLm9yZy93aWtpcGVkaWEvY29tbW9ucy82LzZhLyUyMkNhbHlwc28lMjJfLV9Nb250cmVhbCUyQ18xOTgwLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgeyBjb25maWdDbGFzc2VzLCBpbml0aWFsQ2FyZHMgfTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjsgLy8gYWRkIGltcG9ydCBvZiB0aGUgbWFpbiBzdHlsZXNoZWV0cyBmaWxlXHJcblxyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybXMuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7IGNvbmZpZ0NsYXNzZXMsIGluaXRpYWxDYXJkcyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbi8vV3JhcHBlcnNcclxuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9lZGl0LXByb2ZpbGVcIik7XHJcbmNvbnN0IGVkaXRGb3JtRWxlbWVudCA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG5cclxuY29uc3QgYWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2FkZC1jYXJkXCIpO1xyXG5jb25zdCBhZGRDYXJkRm9ybUVsZW1lbnQgPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG5cclxuY29uc3QgZ2FsbGVyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeVwiKTtcclxuXHJcbi8vQnV0dG9uc1xyXG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tZWRpdFwiKTtcclxuY29uc3QgYWRkQ2FyZE1vZGFsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tYWRkXCIpO1xyXG5cclxuLy9JbnB1dHNcclxuY29uc3QgbmFtZUVkaXRQcm9maWxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLmZvcm1fX2lucHV0X2NvbnRlbnRfbmFtZVwiXHJcbik7XHJcblxyXG5jb25zdCBqb2JFZGl0UHJvZmlsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dF9jb250ZW50X2pvYlwiKTtcclxuXHJcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZFwiKS5jb250ZW50O1xyXG5cclxuLyoqXHJcbiAqIEdlbmVyYXRlIG5ldyBjYXJkXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBjYXJkT2JqZWN0XHJcbiAqIEByZXR1cm5zIE9iamVjdFxyXG4gKi9cclxuY29uc3QgY3JlYXRlQ2FyZCA9IChjYXJkT2JqZWN0KSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmRPYmplY3QubmFtZSwgY2FyZE9iamVjdC5saW5rLCBjYXJkVGVtcGxhdGUsICgpID0+IHtcclxuICAgIGltYWdlTW9kYWwub3BlbihjYXJkT2JqZWN0Lm5hbWUsIGNhcmRPYmplY3QubGluayk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbn07XHJcblxyXG5jb25zdCBjYXJkcyA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogY3JlYXRlQ2FyZCxcclxuICB9LFxyXG4gIFwiLmdhbGxlcnlcIlxyXG4pO1xyXG5jYXJkcy5yZW5kZXJJdGVtcygpO1xyXG5cclxuY29uc3QgYWRkTmV3Q2FyZE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXCJwb3B1cF90eXBlX2FkZC1jYXJkXCIsIChkYXRhKSA9PiB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGRhdGEpO1xyXG4gIGNhcmRzLnByZXBlbmVkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0aW9uLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgaW1hZ2VNb2RhbCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcInBvcHVwX3R5cGVfY2FyZFwiKTtcclxuaW1hZ2VNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLyoqXHJcbiAqIEZpbGwgZGF0YSBpbiBlZGl0UHJvZmlsZU1vY2t1cFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gam9iXHJcbiAqL1xyXG5jb25zdCBmaWxsRWRpdFByb2ZpbGVGb3JtID0gKG5hbWUsIGpvYikgPT4ge1xyXG4gIG5hbWVFZGl0UHJvZmlsZUlucHV0LnZhbHVlID0gbmFtZTtcclxuICBqb2JFZGl0UHJvZmlsZUlucHV0LnZhbHVlID0gam9iO1xyXG59O1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBqb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fc3VidGl0bGVcIixcclxufSk7XHJcblxyXG5jb25zdCBlZGl0TW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcInBvcHVwX3R5cGVfZWRpdC1wcm9maWxlXCIsIChkYXRhKSA9PiB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XHJcbn0pO1xyXG5lZGl0TW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmVkaXRQcm9maWxlTW9kYWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCBkYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBmaWxsRWRpdFByb2ZpbGVGb3JtKGRhdGEubmFtZSwgZGF0YS5qb2IpO1xyXG4gIGVkaXRNb2RhbC5vcGVuKCk7XHJcbiAgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KTtcclxuXHJcbmFkZE5ld0NhcmRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuYWRkQ2FyZE1vZGFsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkTmV3Q2FyZE1vZGFsLm9wZW4oKTtcclxuICBhZGRDYXJkRm9ybVZhbGlkYXRpb24ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0aW9uLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbn0pO1xyXG5cclxuLy8gVmFsaWRhdGlvblxyXG5jb25zdCBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBjb25maWdDbGFzc2VzLFxyXG4gIGVkaXRGb3JtRWxlbWVudFxyXG4pO1xyXG5lZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBjb25maWdDbGFzc2VzLFxyXG4gIGFkZENhcmRGb3JtRWxlbWVudFxyXG4pO1xyXG5hZGRDYXJkRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iLCJjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih0aXRsZSwgbGluaywgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICB0aGlzLl90aXRsZSA9IHRpdGxlO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHJlbW92ZSBjYXJkXHJcbiAgICovXHJcbiAgX2hhbmRsZURlbGV0ZSA9ICgpID0+IHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiB0b2dnbGUgbGlrZSBidXR0b25cclxuICAgKi9cclxuICBfaGFuZGxlTGlrZSA9ICgpID0+IHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2J1dHRvbi1saWtlX2xpa2VkXCIpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIHNldCBhbGwgbGlzdGVuZXJzIG9uIHRoZSBjYXJkXHJcbiAgICovXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX2VsZW1lbnQpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTGlrZSk7XHJcbiAgICB0aGlzLl90cmFzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlRGVsZXRlKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBuZXcgZWxlbWVudCB3aXRoIGNhcmQgYnkgdGVtcGxhdGVcclxuICAgKiBAcmV0dXJucyBvYmplY3RcclxuICAgKi9cclxuICBnZW5lcmF0ZUNhcmQgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fY2FyZFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvbi1saWtlXCIpO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fdHJhc2hCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLXRyYXNoXCIpO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fdGl0bGU7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENhcmQ7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG5cclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICBjb25zdCBjYXJkID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGNhcmQpO1xyXG4gIH1cclxuICBwcmVwZW5lZEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLmFkZEl0ZW0oaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMucG9wVXBEZXNjcmlwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5wb3B1cF9fZGVzY3JpcHRpb25cIlxyXG4gICAgKTtcclxuICB9XHJcbiAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICB0aGlzLnBvcFVwRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgY29uc3QgaW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XHJcbiAgICBpbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgaW1hZ2UuYWx0ID0gbmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlO1xyXG4iLCJjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9qb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl9qb2IudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBqb2IgfSkge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2IudGV4dENvbnRlbnQgPSBqb2I7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbztcclxuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfaW5wdXRMaXN0Iiwic29tZSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9mb3JtIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsInJlc2V0VmFsaWRhdGlvbiIsImZvckVhY2giLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJyZW1vdmUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiZW5hYmxlVmFsaWRhdGlvbiIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiZG9jdW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwib3BlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cCIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3BvcHVwRm9ybSIsIl9wb3B1cElucHV0cyIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwibmFtZSIsInZhbHVlIiwiZSIsInByZXZlbnREZWZhdWx0IiwicmVzZXQiLCJjb25maWdDbGFzc2VzIiwiZWRpdEZvcm1FbGVtZW50IiwiYWRkQ2FyZEZvcm1FbGVtZW50IiwiZWRpdFByb2ZpbGVNb2RhbEJ1dHRvbiIsImFkZENhcmRNb2RhbEJ1dHRvbiIsIm5hbWVFZGl0UHJvZmlsZUlucHV0Iiwiam9iRWRpdFByb2ZpbGVJbnB1dCIsImNhcmRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjcmVhdGVDYXJkIiwiY2FyZE9iamVjdCIsInRpdGxlIiwibGluayIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJfZWxlbWVudCIsIl9saWtlQnV0dG9uIiwidG9nZ2xlIiwiX2ltYWdlRWxlbWVudCIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZUxpa2UiLCJfdHJhc2hCdXR0b24iLCJfaGFuZGxlRGVsZXRlIiwiX2NhcmRTZWxlY3RvciIsImNsb25lTm9kZSIsInNyYyIsIl9saW5rIiwiYWx0IiwiX3RpdGxlIiwiaW1hZ2VNb2RhbCIsImdlbmVyYXRlQ2FyZCIsImNhcmRzIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiYWRkSXRlbSIsIml0ZW0iLCJjYXJkIiwiYXBwZW5kIiwicHJlcGVuZWRJdGVtIiwicHJlcGVuZCIsInJlbmRlckl0ZW1zIiwiYWRkTmV3Q2FyZE1vZGFsIiwiUG9wdXBXaXRoRm9ybSIsImRhdGEiLCJjYXJkRWxlbWVudCIsImFkZENhcmRGb3JtVmFsaWRhdGlvbiIsInBvcFVwRGVzY3JpcHRpb24iLCJpbWFnZSIsInVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJfbmFtZSIsIl9qb2IiLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwiZWRpdE1vZGFsIiwiZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciJdLCJzb3VyY2VSb290IjoiIn0=